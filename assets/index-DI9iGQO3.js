import{T as w,r as _,B as _e,I as ge,d as s,F as j,o as p,c as R,G as g,H as z,g as l,e,f as a,i as L,J as Q,K as A,t as b,j as m,C as G,n as H,y as J,A as be,q as ye}from"./index-FvKVKK2v.js";import{d as ve}from"./export-DRQPRSom.js";function he(d){return w({url:"/system/post/list",method:"get",params:d})}function Ve(d){return w({url:"/system/post/"+d,method:"get"})}function Ce(d){return w({url:"/system/post",method:"post",data:d})}function we(d){return w({url:"/system/post",method:"put",data:d})}function ke(d){return w({url:"/system/post/"+d,method:"delete"})}function Se(d){return w({url:"/system/post/export",method:"post",data:d,responseType:"blob"})}const Ne={class:"app-container"},xe={class:"dialog-footer"},Pe=be({name:"Post"}),qe=Object.assign(Pe,{setup(d){const{proxy:y}=ye(),{sys_normal_disable:P}=y.useDict("sys_normal_disable"),T=_([]),v=_(!1),U=_(!0),k=_(!0),S=_([]),$=_(!0),E=_(!0),I=_(0),q=_(""),O=_e({form:{},queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}),{queryParams:r,form:u,rules:M}=ge(O);function V(){U.value=!0,he(r.value).then(n=>{T.value=n.rows,I.value=n.total,U.value=!1})}function W(){v.value=!1,D()}function D(){u.value={postId:void 0,postCode:void 0,postName:void 0,postSort:0,status:"0",remark:void 0},y.resetForm("postRef")}function N(){r.value.pageNum=1,V()}function X(){y.resetForm("queryRef"),N()}function Y(n){S.value=n.map(o=>o.postId),$.value=n.length!=1,E.value=!n.length}function Z(){D(),v.value=!0,q.value="添加岗位"}function K(n){D();const o=n.postId||S.value;Ve(o).then(f=>{u.value=f.data,v.value=!0,q.value="修改岗位"})}function ee(){y.$refs.postRef.validate(n=>{n&&(u.value.postId!=null?we(u.value).then(o=>{y.$modal.msgSuccess("修改成功"),v.value=!1,V()}):Ce(u.value).then(o=>{y.$modal.msgSuccess("新增成功"),v.value=!1,V()}))})}function B(n){const o=n.postId||S.value;y.$modal.confirm('是否确认删除岗位编号为"'+o+'"的数据项？').then(function(){return ke(o)}).then(()=>{V(),y.$modal.msgSuccess("删除成功")}).catch(()=>{})}async function te(){let n={};S.value.forEach((f,i)=>{n[i]=f});let o=await Se(n);ve(o)}return V(),(n,o)=>{const f=s("el-input"),i=s("el-form-item"),le=s("el-option"),oe=s("el-select"),c=s("el-button"),F=s("el-form"),x=s("el-col"),ae=s("right-toolbar"),ne=s("el-row"),h=s("el-table-column"),se=s("dict-tag"),ue=s("el-table"),re=s("pagination"),de=s("el-input-number"),pe=s("el-radio"),ie=s("el-radio-group"),me=s("el-dialog"),C=j("hasPermi"),ce=j("loading");return p(),R("div",Ne,[g(e(F,{model:l(r),ref:"queryRef",inline:!0},{default:a(()=>[e(i,{label:"岗位编码",prop:"postCode"},{default:a(()=>[e(f,{modelValue:l(r).postCode,"onUpdate:modelValue":o[0]||(o[0]=t=>l(r).postCode=t),placeholder:"请输入岗位编码",clearable:"",style:{width:"200px"},onKeyup:L(N,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(i,{label:"岗位名称",prop:"postName"},{default:a(()=>[e(f,{modelValue:l(r).postName,"onUpdate:modelValue":o[1]||(o[1]=t=>l(r).postName=t),placeholder:"请输入岗位名称",clearable:"",style:{width:"200px"},onKeyup:L(N,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(i,{label:"状态",prop:"status"},{default:a(()=>[e(oe,{modelValue:l(r).status,"onUpdate:modelValue":o[2]||(o[2]=t=>l(r).status=t),placeholder:"岗位状态",clearable:"",style:{width:"200px"}},{default:a(()=>[(p(!0),R(Q,null,A(l(P),t=>(p(),b(le,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(c,{type:"primary",icon:"Search",onClick:N},{default:a(()=>[m("搜索")]),_:1}),e(c,{icon:"Refresh",onClick:X},{default:a(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[z,l(k)]]),e(ne,{gutter:10,class:"mb8"},{default:a(()=>[e(x,{span:1.5},{default:a(()=>[g((p(),b(c,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:a(()=>[m("新增")]),_:1})),[[C,["system:post:add"]]])]),_:1}),e(x,{span:1.5},{default:a(()=>[g((p(),b(c,{type:"success",plain:"",icon:"Edit",disabled:l($),onClick:K},{default:a(()=>[m("修改")]),_:1},8,["disabled"])),[[C,["system:post:edit"]]])]),_:1}),e(x,{span:1.5},{default:a(()=>[g((p(),b(c,{type:"danger",plain:"",icon:"Delete",disabled:l(E),onClick:B},{default:a(()=>[m("删除")]),_:1},8,["disabled"])),[[C,["system:post:remove"]]])]),_:1}),e(x,{span:1.5},{default:a(()=>[g((p(),b(c,{type:"warning",plain:"",icon:"Download",onClick:te},{default:a(()=>[m("导出")]),_:1})),[[C,["system:post:export"]]])]),_:1}),e(ae,{showSearch:l(k),"onUpdate:showSearch":o[3]||(o[3]=t=>G(k)?k.value=t:null),onQueryTable:V},null,8,["showSearch"])]),_:1}),g((p(),b(ue,{data:l(T),onSelectionChange:Y},{default:a(()=>[e(h,{type:"selection",width:"55",align:"center"}),e(h,{label:"岗位编号",align:"center",prop:"postId"}),e(h,{label:"岗位编码",align:"center",prop:"postCode"}),e(h,{label:"岗位名称",align:"center",prop:"postName"}),e(h,{label:"岗位排序",align:"center",prop:"postSort"}),e(h,{label:"状态",align:"center",prop:"status"},{default:a(t=>[e(se,{options:l(P),value:t.row.status},null,8,["options","value"])]),_:1}),e(h,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(t=>[H("span",null,J(n.parseTime(t.row.createTime)),1)]),_:1}),e(h,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:a(t=>[g((p(),b(c,{link:"",type:"primary",icon:"Edit",onClick:fe=>K(t.row)},{default:a(()=>[m("修改")]),_:2},1032,["onClick"])),[[C,["system:post:edit"]]]),g((p(),b(c,{link:"",type:"primary",icon:"Delete",onClick:fe=>B(t.row)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])),[[C,["system:post:remove"]]])]),_:1})]),_:1},8,["data"])),[[ce,l(U)]]),g(e(re,{total:l(I),page:l(r).pageNum,"onUpdate:page":o[4]||(o[4]=t=>l(r).pageNum=t),limit:l(r).pageSize,"onUpdate:limit":o[5]||(o[5]=t=>l(r).pageSize=t),onPagination:V},null,8,["total","page","limit"]),[[z,l(I)>0]]),e(me,{title:l(q),modelValue:l(v),"onUpdate:modelValue":o[11]||(o[11]=t=>G(v)?v.value=t:null),width:"500px","append-to-body":""},{footer:a(()=>[H("div",xe,[e(c,{type:"primary",onClick:ee},{default:a(()=>[m("确 定")]),_:1}),e(c,{onClick:W},{default:a(()=>[m("取 消")]),_:1})])]),default:a(()=>[e(F,{ref:"postRef",model:l(u),rules:l(M),"label-width":"80px"},{default:a(()=>[e(i,{label:"岗位名称",prop:"postName"},{default:a(()=>[e(f,{modelValue:l(u).postName,"onUpdate:modelValue":o[6]||(o[6]=t=>l(u).postName=t),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"岗位编码",prop:"postCode"},{default:a(()=>[e(f,{modelValue:l(u).postCode,"onUpdate:modelValue":o[7]||(o[7]=t=>l(u).postCode=t),placeholder:"请输入编码名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"岗位顺序",prop:"postSort"},{default:a(()=>[e(de,{modelValue:l(u).postSort,"onUpdate:modelValue":o[8]||(o[8]=t=>l(u).postSort=t),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),e(i,{label:"岗位状态",prop:"status"},{default:a(()=>[e(ie,{modelValue:l(u).status,"onUpdate:modelValue":o[9]||(o[9]=t=>l(u).status=t)},{default:a(()=>[(p(!0),R(Q,null,A(l(P),t=>(p(),b(pe,{key:t.value,label:t.value},{default:a(()=>[m(J(t.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"备注",prop:"remark"},{default:a(()=>[e(f,{modelValue:l(u).remark,"onUpdate:modelValue":o[10]||(o[10]=t=>l(u).remark=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{qe as default};
