import{_ as K,b as j,u as E,a as A,r as d,w as F,d as u,o as g,c as v,e as o,f as r,g as t,h as a,i as L,j as x,k as O,l as P,p as Q,m as T,n as y,q as $}from"./index-Br2HtEUP.js";import{d as D,e as k}from"./jsencrypt-DEwj1mID.js";const V=m=>(Q("data-v-85d1602b"),m=m(),T(),m),G={class:"login"},H=V(()=>y("h3",{class:"title"},"若依后台管理系统",-1)),J={key:0},W={key:1},X={key:0,style:{float:"right"}},Y=V(()=>y("div",{class:"el-login-footer"},[y("span",null,"Copyright © 2018-2023 ruoyi.vip3 All Rights Reserved.")],-1)),Z={__name:"login",setup(m){const M=j(),h=E(),q=A(),{proxy:C}=$(),e=d({username:"admin",password:"admin123",rememberMe:!1,code:"",uuid:""}),R={username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]};d("");const _=d(!1),I=d(!0),S=d(!1),w=d(void 0);F(h,n=>{w.value=n.query&&n.query.redirect},{immediate:!0});function b(){C.$refs.loginRef.validate(n=>{if(n){_.value=!0,e.value.rememberMe?(a.set("username",e.value.username,{expires:30}),a.set("password",k(e.value.password),{expires:30}),a.set("rememberMe",e.value.rememberMe,{expires:30})):(a.remove("username"),a.remove("password"),a.remove("rememberMe"));const s={...e.value,password:k(e.value.password)};M.login(s).then(()=>{const l=h.query,f=Object.keys(l).reduce((i,p)=>(p!=="redirect"&&(i[p]=l[p]),i),{});q.push({path:w.value||"/",query:f})}).catch(()=>{_.value=!1,I.value})}})}function B(){const n=a.get("username"),s=a.get("password"),l=a.get("rememberMe");e.value={username:n===void 0?e.value.username:n,password:s===void 0?e.value.password:D(s),rememberMe:l===void 0?!1:!!l}}return B(),(n,s)=>{const l=u("svg-icon"),f=u("el-input"),i=u("el-form-item"),p=u("el-checkbox"),N=u("el-button"),U=u("router-link"),z=u("el-form");return g(),v("div",G,[o(z,{ref:"loginRef",model:t(e),rules:R,class:"login-form"},{default:r(()=>[H,o(i,{prop:"username"},{default:r(()=>[o(f,{modelValue:t(e).username,"onUpdate:modelValue":s[0]||(s[0]=c=>t(e).username=c),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:r(()=>[o(l,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:r(()=>[o(f,{modelValue:t(e).password,"onUpdate:modelValue":s[1]||(s[1]=c=>t(e).password=c),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:L(b,["enter"])},{prefix:r(()=>[o(l,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),o(p,{modelValue:t(e).rememberMe,"onUpdate:modelValue":s[2]||(s[2]=c=>t(e).rememberMe=c),style:{margin:"0px 0px 25px 0px"}},{default:r(()=>[x("记住密码")]),_:1},8,["modelValue"]),o(i,{style:{width:"100%"}},{default:r(()=>[o(N,{loading:t(_),size:"large",type:"primary",style:{width:"100%"},onClick:O(b,["prevent"])},{default:r(()=>[t(_)?(g(),v("span",W,"登 录 中...")):(g(),v("span",J,"登 录"))]),_:1},8,["loading","onClick"]),t(S)?(g(),v("div",X,[o(U,{class:"link-type",to:"/register"},{default:r(()=>[x("立即注册")]),_:1})])):P("",!0)]),_:1})]),_:1},8,["model"]),Y])}}},oe=K(Z,[["__scopeId","data-v-85d1602b"]]);export{oe as default};
