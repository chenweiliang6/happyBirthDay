import{T as C,r as g,B as _e,I as ye,d as i,F as z,o as c,c as q,G as y,H as L,g as n,e,f as t,i as Q,J as A,K as M,t as v,C as $,j as p,n as G,y as H,A as ve,q as be}from"./index-FvKVKK2v.js";import{d as he}from"./export-DRQPRSom.js";function Ve(d){return C({url:"/system/config/list",method:"get",params:d})}function we(d){return C({url:"/system/config/"+d,method:"get"})}function ke(d){return C({url:"/system/config",method:"post",data:d})}function Ce(d){return C({url:"/system/config",method:"put",data:d})}function Te(d){return C({url:"/system/config/"+d,method:"delete"})}function xe(d){return C({url:"/system/config/export",method:"post",data:d,responseType:"blob"})}const Ne={class:"app-container"},Ke={class:"dialog-footer"},Se=ve({name:"Config"}),Ie=Object.assign(Se,{setup(d){const{proxy:b}=be(),{sys_yes_no:S}=b.useDict("sys_yes_no"),E=g([]),h=g(!1),U=g(!0),T=g(!0),x=g([]),P=g(!0),B=g(!0),D=g(0),I=g(""),w=g([]),J=_e({form:{},queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0},rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],configValue:[{required:!0,message:"参数键值不能为空",trigger:"blur"}]}}),{queryParams:r,form:u,rules:O}=ye(J);function V(){U.value=!0,Ve({...r.value,startTime:w.value[0],endTime:w.value[1]}).then(a=>{E.value=a.rows,D.value=a.total,U.value=!1})}function W(){h.value=!1,R()}function R(){u.value={configId:void 0,configName:void 0,configKey:void 0,configValue:void 0,configType:"Y",remark:void 0},b.resetForm("configRef")}function N(){r.value.pageNum=1,V()}function X(){w.value=[],b.resetForm("queryRef"),N()}function Z(a){x.value=a.map(o=>o.configId),P.value=a.length!=1,B.value=!a.length}function ee(){R(),h.value=!0,I.value="添加参数"}function F(a){R();const o=a.configId||x.value;we(o).then(f=>{u.value=f.data,h.value=!0,I.value="修改参数"})}function le(){b.$refs.configRef.validate(a=>{a&&(u.value.configId!=null?Ce(u.value).then(o=>{b.$modal.msgSuccess("修改成功"),h.value=!1,V()}):ke(u.value).then(o=>{b.$modal.msgSuccess("新增成功"),h.value=!1,V()}))})}function Y(a){const o=a.configId||x.value;b.$modal.confirm('是否确认删除参数编号为"'+o+'"的数据项？').then(function(){return Te(o)}).then(()=>{V(),b.$modal.msgSuccess("删除成功")}).catch(()=>{})}async function oe(){let a={};x.value.forEach((f,s)=>{a[s]=f});let o=await xe(a);he(o)}return V(),(a,o)=>{const f=i("el-input"),s=i("el-form-item"),ne=i("el-option"),te=i("el-select"),ae=i("el-date-picker"),m=i("el-button"),j=i("el-form"),K=i("el-col"),ie=i("right-toolbar"),ue=i("el-row"),_=i("el-table-column"),re=i("dict-tag"),de=i("el-table"),se=i("pagination"),ce=i("el-radio"),pe=i("el-radio-group"),fe=i("el-dialog"),k=z("hasPermi"),me=z("loading");return c(),q("div",Ne,[y(e(j,{model:n(r),ref:"queryRef",inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"参数名称",prop:"configName"},{default:t(()=>[e(f,{modelValue:n(r).configName,"onUpdate:modelValue":o[0]||(o[0]=l=>n(r).configName=l),placeholder:"请输入参数名称",clearable:"",style:{width:"240px"},onKeyup:Q(N,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(s,{label:"参数键名",prop:"configKey"},{default:t(()=>[e(f,{modelValue:n(r).configKey,"onUpdate:modelValue":o[1]||(o[1]=l=>n(r).configKey=l),placeholder:"请输入参数键名",clearable:"",style:{width:"240px"},onKeyup:Q(N,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(s,{label:"系统内置",prop:"configType"},{default:t(()=>[e(te,{modelValue:n(r).configType,"onUpdate:modelValue":o[2]||(o[2]=l=>n(r).configType=l),placeholder:"系统内置",clearable:""},{default:t(()=>[(c(!0),q(A,null,M(n(S),l=>(c(),v(ne,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"创建时间",style:{width:"308px"}},{default:t(()=>[e(ae,{modelValue:n(w),"onUpdate:modelValue":o[3]||(o[3]=l=>$(w)?w.value=l:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(m,{type:"primary",icon:"Search",onClick:N},{default:t(()=>[p("搜索")]),_:1}),e(m,{icon:"Refresh",onClick:X},{default:t(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[L,n(T)]]),e(ue,{gutter:10,class:"mb8"},{default:t(()=>[e(K,{span:1.5},{default:t(()=>[y((c(),v(m,{type:"primary",plain:"",icon:"Plus",onClick:ee},{default:t(()=>[p("新增")]),_:1})),[[k,["system:config:add"]]])]),_:1}),e(K,{span:1.5},{default:t(()=>[y((c(),v(m,{type:"success",plain:"",icon:"Edit",disabled:n(P),onClick:F},{default:t(()=>[p("修改")]),_:1},8,["disabled"])),[[k,["system:config:edit"]]])]),_:1}),e(K,{span:1.5},{default:t(()=>[y((c(),v(m,{type:"danger",plain:"",icon:"Delete",disabled:n(B),onClick:Y},{default:t(()=>[p("删除")]),_:1},8,["disabled"])),[[k,["system:config:remove"]]])]),_:1}),e(K,{span:1.5},{default:t(()=>[y((c(),v(m,{type:"warning",plain:"",icon:"Download",onClick:oe},{default:t(()=>[p("导出")]),_:1})),[[k,["system:config:export"]]])]),_:1}),e(ie,{showSearch:n(T),"onUpdate:showSearch":o[4]||(o[4]=l=>$(T)?T.value=l:null),onQueryTable:V},null,8,["showSearch"])]),_:1}),y((c(),v(de,{data:n(E),onSelectionChange:Z},{default:t(()=>[e(_,{type:"selection",width:"55",align:"center"}),e(_,{label:"参数主键",align:"center",prop:"configId"}),e(_,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),e(_,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),e(_,{label:"参数键值",align:"center",prop:"configValue","show-overflow-tooltip":!0}),e(_,{label:"系统内置",align:"center",prop:"configType"},{default:t(l=>[e(re,{options:n(S),value:l.row.configType},null,8,["options","value"])]),_:1}),e(_,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(_,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(l=>[G("span",null,H(a.parseTime(l.row.createTime)),1)]),_:1}),e(_,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:t(l=>[y((c(),v(m,{link:"",type:"primary",icon:"Edit",onClick:ge=>F(l.row)},{default:t(()=>[p("修改")]),_:2},1032,["onClick"])),[[k,["system:config:edit"]]]),y((c(),v(m,{link:"",type:"primary",icon:"Delete",onClick:ge=>Y(l.row)},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])),[[k,["system:config:remove"]]])]),_:1})]),_:1},8,["data"])),[[me,n(U)]]),y(e(se,{total:n(D),page:n(r).pageNum,"onUpdate:page":o[5]||(o[5]=l=>n(r).pageNum=l),limit:n(r).pageSize,"onUpdate:limit":o[6]||(o[6]=l=>n(r).pageSize=l),onPagination:V},null,8,["total","page","limit"]),[[L,n(D)>0]]),e(fe,{title:n(I),modelValue:n(h),"onUpdate:modelValue":o[12]||(o[12]=l=>$(h)?h.value=l:null),width:"500px","append-to-body":""},{footer:t(()=>[G("div",Ke,[e(m,{type:"primary",onClick:le},{default:t(()=>[p("确 定")]),_:1}),e(m,{onClick:W},{default:t(()=>[p("取 消")]),_:1})])]),default:t(()=>[e(j,{ref:"configRef",model:n(u),rules:n(O),"label-width":"80px"},{default:t(()=>[e(s,{label:"参数名称",prop:"configName"},{default:t(()=>[e(f,{modelValue:n(u).configName,"onUpdate:modelValue":o[7]||(o[7]=l=>n(u).configName=l),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),e(s,{label:"参数键名",prop:"configKey"},{default:t(()=>[e(f,{modelValue:n(u).configKey,"onUpdate:modelValue":o[8]||(o[8]=l=>n(u).configKey=l),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),e(s,{label:"参数键值",prop:"configValue"},{default:t(()=>[e(f,{modelValue:n(u).configValue,"onUpdate:modelValue":o[9]||(o[9]=l=>n(u).configValue=l),placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),e(s,{label:"系统内置",prop:"configType"},{default:t(()=>[e(pe,{modelValue:n(u).configType,"onUpdate:modelValue":o[10]||(o[10]=l=>n(u).configType=l)},{default:t(()=>[(c(!0),q(A,null,M(n(S),l=>(c(),v(ce,{key:l.value,label:l.value},{default:t(()=>[p(H(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"备注",prop:"remark"},{default:t(()=>[e(f,{modelValue:n(u).remark,"onUpdate:modelValue":o[11]||(o[11]=l=>n(u).remark=l),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ie as default};
