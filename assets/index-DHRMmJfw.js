import{r as m,B as ye,I as ge,d,F as z,o as s,c as R,G as _,H as L,g as o,e as t,f as l,i as Q,J as A,K as M,t as y,C as q,j as p,n as $,y as E,A as ve,q as be}from"./index-FvKVKK2v.js";import{l as he,g as we,u as Ve,a as ke,d as Te,e as Ce}from"./type-r1ymzIEL.js";import{d as xe}from"./export-DRQPRSom.js";const Ne={class:"app-container"},Se={class:"dialog-footer"},De=ve({name:"Dict"}),$e=Object.assign(De,{setup(Ue){const{proxy:g}=be(),{sys_normal_disable:N}=g.useDict("sys_normal_disable"),K=m([]),v=m(!1),S=m(!0),V=m(!0),k=m([]),P=m(!0),B=m(!0),D=m(0),U=m(""),T=m([]),G=ye({form:{},queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]}}),{queryParams:i,form:u,rules:H}=ge(G),J=n=>{i.value.startTime=n[0],i.value.endTime=n[1]};function h(){S.value=!0,he(i.value).then(n=>{K.value=n.rows,D.value=n.total,S.value=!1})}function O(){v.value=!1,I()}function I(){u.value={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0},g.resetForm("dictRef")}function C(){i.value.pageNum=1,h()}function W(){T.value=[],g.resetForm("queryRef"),C()}function X(){I(),v.value=!0,U.value="添加字典类型"}function Z(n){k.value=n.map(a=>a.dictId),P.value=n.length!=1,B.value=!n.length}function F(n){I();const a=n.dictId||k.value;we(a).then(f=>{u.value=f.data,v.value=!0,U.value="修改字典类型"})}function ee(){g.$refs.dictRef.validate(n=>{n&&(u.value.dictId!=null?Ve(u.value).then(a=>{g.$modal.msgSuccess("修改成功"),v.value=!1,h()}):ke(u.value).then(a=>{g.$modal.msgSuccess("新增成功"),v.value=!1,h()}))})}function Y(n){const a=n.dictId||k.value;g.$modal.confirm('是否确认删除字典编号为"'+a+'"的数据项？').then(function(){return Te(a)}).then(()=>{h(),g.$modal.msgSuccess("删除成功")}).catch(()=>{})}async function te(){let n={};k.value.forEach((f,r)=>{n[r]=f});let a=await Ce(n);xe(a)}return h(),(n,a)=>{const f=d("el-input"),r=d("el-form-item"),le=d("el-option"),ae=d("el-select"),oe=d("el-date-picker"),c=d("el-button"),j=d("el-form"),x=d("el-col"),ne=d("right-toolbar"),de=d("el-row"),b=d("el-table-column"),ie=d("router-link"),ue=d("dict-tag"),se=d("el-table"),re=d("pagination"),pe=d("el-radio"),ce=d("el-radio-group"),me=d("el-dialog"),w=z("hasPermi"),fe=z("loading");return s(),R("div",Ne,[_(t(j,{model:o(i),ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[t(r,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(f,{modelValue:o(i).dictName,"onUpdate:modelValue":a[0]||(a[0]=e=>o(i).dictName=e),placeholder:"请输入字典名称",clearable:"",style:{width:"240px"},onKeyup:Q(C,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(r,{label:"字典类型",prop:"dictType"},{default:l(()=>[t(f,{modelValue:o(i).dictType,"onUpdate:modelValue":a[1]||(a[1]=e=>o(i).dictType=e),placeholder:"请输入字典类型",clearable:"",style:{width:"240px"},onKeyup:Q(C,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:l(()=>[t(ae,{modelValue:o(i).status,"onUpdate:modelValue":a[2]||(a[2]=e=>o(i).status=e),placeholder:"字典状态",clearable:"",style:{width:"240px"}},{default:l(()=>[(s(!0),R(A,null,M(o(N),e=>(s(),y(le,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"创建时间",style:{width:"308px"}},{default:l(()=>[t(oe,{modelValue:o(T),"onUpdate:modelValue":a[3]||(a[3]=e=>q(T)?T.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:J},null,8,["modelValue"])]),_:1}),t(r,null,{default:l(()=>[t(c,{type:"primary",icon:"Search",onClick:C},{default:l(()=>[p("搜索")]),_:1}),t(c,{icon:"Refresh",onClick:W},{default:l(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[L,o(V)]]),t(de,{gutter:10,class:"mb8"},{default:l(()=>[t(x,{span:1.5},{default:l(()=>[_((s(),y(c,{type:"primary",plain:"",icon:"Plus",onClick:X},{default:l(()=>[p("新增")]),_:1})),[[w,["system:dict:add"]]])]),_:1}),t(x,{span:1.5},{default:l(()=>[_((s(),y(c,{type:"success",plain:"",icon:"Edit",disabled:o(P),onClick:F},{default:l(()=>[p("修改")]),_:1},8,["disabled"])),[[w,["system:dict:edit"]]])]),_:1}),t(x,{span:1.5},{default:l(()=>[_((s(),y(c,{type:"danger",plain:"",icon:"Delete",disabled:o(B),onClick:Y},{default:l(()=>[p("删除")]),_:1},8,["disabled"])),[[w,["system:dict:remove"]]])]),_:1}),t(x,{span:1.5},{default:l(()=>[_((s(),y(c,{type:"warning",plain:"",icon:"Download",onClick:te},{default:l(()=>[p("导出")]),_:1})),[[w,["system:dict:export"]]])]),_:1}),t(ne,{showSearch:o(V),"onUpdate:showSearch":a[4]||(a[4]=e=>q(V)?V.value=e:null),onQueryTable:h},null,8,["showSearch"])]),_:1}),_((s(),y(se,{data:o(K),onSelectionChange:Z},{default:l(()=>[t(b,{type:"selection",width:"55",align:"center"}),t(b,{label:"字典编号",align:"center",prop:"dictId"}),t(b,{label:"字典名称",align:"center",prop:"dictName","show-overflow-tooltip":!0}),t(b,{label:"字典类型",align:"center","show-overflow-tooltip":!0},{default:l(e=>[t(ie,{to:"/system/dict-data/index/"+e.row.dictId,class:"link-type"},{default:l(()=>[$("span",null,E(e.row.dictType),1)]),_:2},1032,["to"])]),_:1}),t(b,{label:"状态",align:"center",prop:"status"},{default:l(e=>[t(ue,{options:o(N),value:e.row.status},null,8,["options","value"])]),_:1}),t(b,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(b,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:l(e=>[$("span",null,E(n.parseTime(e.row.createTime)),1)]),_:1}),t(b,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:l(e=>[_((s(),y(c,{link:"",type:"primary",icon:"Edit",onClick:_e=>F(e.row)},{default:l(()=>[p("修改")]),_:2},1032,["onClick"])),[[w,["system:dict:edit"]]]),_((s(),y(c,{link:"",type:"primary",icon:"Delete",onClick:_e=>Y(e.row)},{default:l(()=>[p("删除")]),_:2},1032,["onClick"])),[[w,["system:dict:remove"]]])]),_:1})]),_:1},8,["data"])),[[fe,o(S)]]),_(t(re,{total:o(D),page:o(i).pageNum,"onUpdate:page":a[5]||(a[5]=e=>o(i).pageNum=e),limit:o(i).pageSize,"onUpdate:limit":a[6]||(a[6]=e=>o(i).pageSize=e),onPagination:h},null,8,["total","page","limit"]),[[L,o(D)>0]]),t(me,{title:o(U),modelValue:o(v),"onUpdate:modelValue":a[11]||(a[11]=e=>q(v)?v.value=e:null),width:"500px","append-to-body":""},{footer:l(()=>[$("div",Se,[t(c,{type:"primary",onClick:ee},{default:l(()=>[p("确 定")]),_:1}),t(c,{onClick:O},{default:l(()=>[p("取 消")]),_:1})])]),default:l(()=>[t(j,{ref:"dictRef",model:o(u),rules:o(H),"label-width":"80px"},{default:l(()=>[t(r,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(f,{modelValue:o(u).dictName,"onUpdate:modelValue":a[7]||(a[7]=e=>o(u).dictName=e),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),t(r,{label:"字典类型",prop:"dictType"},{default:l(()=>[t(f,{modelValue:o(u).dictType,"onUpdate:modelValue":a[8]||(a[8]=e=>o(u).dictType=e),placeholder:"请输入字典类型"},null,8,["modelValue"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:l(()=>[t(ce,{modelValue:o(u).status,"onUpdate:modelValue":a[9]||(a[9]=e=>o(u).status=e)},{default:l(()=>[(s(!0),R(A,null,M(o(N),e=>(s(),y(pe,{key:e.value,label:e.value},{default:l(()=>[p(E(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"备注",prop:"remark"},{default:l(()=>[t(f,{modelValue:o(u).remark,"onUpdate:modelValue":a[10]||(a[10]=e=>o(u).remark=e),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{$e as default};
